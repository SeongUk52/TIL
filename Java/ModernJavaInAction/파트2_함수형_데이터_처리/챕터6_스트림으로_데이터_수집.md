# 챕터 6 스트림으로 데이터 수집

> #### 이 장의 내용
> - Collectors 클래스로 컬렉션을 만들고 사용하기
> - 하나의 값으로 데이터 스트림 리듀스하기
> - 특별한 리듀싱 요약 연산
> - 데이터 그룹화와 분할
> - 자신만의 커스텀 컬렉터 개발

- 스트림은 데이터 집합을 멋지게 처리하는 게으른 반복자라고 설명할 수 있다.
- 다양한 요소 누적방식은 Collector 인터페이스에 정의되어 있다.

## 6.1 컬렉터란 무엇인가?
- 함수형 프로그래밍에서는 '무엇'을 원하는지 직접 명시할 수 있어서 어떤 방법으로 이를 얻을지는 신경 쓸 필요가 없다.
- 다수준으로 그룹화를 수행할 때 명령형 프로그래밍과 함수형 프로그래밍의 차이점이 더욱 두드러진다.
  - 명령형 코드에서는 문제를 해결하는 과정에서 다중 루프와 조건문을 추가하며 가독성과 유지보수성이 크게 떨어진다.
  - 함수형 프로그래밍에서는 필요한 컬렉터를 쉽게 추가할 수 있다.

### 6.1.1 고급 리듀싱 기능을 수행하는 컬렉터
- 훌륭하게 설계된 함수형 API의 또 다른 장점으로 높은 수준의 조합성과 재사용성을 꼽을 수 있다.
  - collect로 결과를 수집하는 과정을 간단하면서도 유연한 방식으로 정의할 수 있다는 점이 컬렉터의 최대 강점이다.
- 구체적으로 설명해서 스트림에 collect를 호출하면 스트림의 요소에(컬렉터로 파라미터화된) 리듀싱 연산이 수행된다.
- Collectors 유틸리티 클래스는 자주 사용하는 컬렉터 인스턴스를 손쉽게 생성할 수 있는 정적 팩토리 메서드를 제공한다.
  - 예를 들어 가장 많이 사용하는 직관적인 정적 메서드로 toList를 꼽을 수 있다.
    - toList는 스트림의 모든 요소를 리스트로 수집한다.

### 6.1.2 미리 정의된 컬렉터
Collectors에서 제공하는 메서드의 기능은 크게 세 가지로 구분할 수 있다.
- 스트림 요소를 하나의 값으로 리듀스하고 요약
- 요소 그룹화
- 요소 분할

## 6.2 리듀싱과 요약
- 컬렉터(Stream.collect 메서드의 인수)로 스트림의 항목을 컬렉션으로 재구성 할 수 있다.
  - 좀 더 일반적으로 말해 컬렉터로 스트림의 모든 항목을 하나의 결과로 합칠 수 있다.
    - 트리를 구성하는 다수준 맵, 메뉴의 칼로리 합계를 가리키는 단순한 정수 등 다양한 형식으로 결과가 도출될 수 있다.
- import static java.util.stream.Collectors.*;


### 6.2.1 스트림값에서 최댓값과 최솟값 검색
- Collectors.maxBy, Collectors.minBy 두 개의 메서드를 이용해서 스트림의 최댓값과 최솟값을 계산할 수 있다.
  - 두 컬렉터는 스트림의 요소를 비교하는 데 사용할 Comparator를 인수로 받는다. 

### 6.2.2 요약 연산
- Collecters 클래스는 Collectors.summingInt라는 특별한 요약 팩터리 메서드를 제공한다. 
  - summingInt는 객체를 int로 매핑하는 함수를 인수로 받는다.
  - summingInt의 인수로 전달된 함수는 객체를 int로 매핑한 컬렉터를 반환한다.
  - summingInt가 collect 메서드로 전달되면 요약 작업을 수행한다.
- Collectors.summingLong과 Collectors.summingDouble 메서드는 같은 방식으로 동작하며 각각 long 또는 double
형식의 데이터로 요약한다는 점만 다르다.
- 이러한 단순 합계 외에 평균값 계산 등의 연산도 요약 기능으로 제공된다. 즉, Collectors.averagingInt, averagingLong,
averagingDouble 등으로 다양한 형식으로 이루어진 숫자 집합의 평균을 계산할 수 있다.
- 종종 이들 중 두 개 이상의 연산을 한 번에 수행해야 할 때도 있다.
  - 이런 상황에서는 팩터리 메서드 summarizingInt가 반환하는 컬렉터를 사용할 수 있다.
    - IntSummaryStatistics 클래스로 모든 정보가 수집된다.
      - long, double에도 대응할 수 있다.

### 6.2.3 문자열 연결
- 컬렉터에 joining 팩토리 메서드를 이용하면 스트림의 각 객체에 toString 메서드를 호출해서 추출한 모든 문자열을 하나의
문자열로 연결해서 반환한다.
- joining 메서드는 내부적으로 StringBuilder를 이용해서 문자열을 하나로 만든다. Dish 클래스가 요리명을 반환하는 
toString 메서드를 포함하고 있다면 map으로 각 요리의 이름을 추출하는 과정을 생략할 수 있다.
- 연결될 두 요소 사이에 구분 문자열을 넣을 수 있도록 오버로드된 joining 팩토리 메서드도 있다.


### 6.2.4 범용 리듀싱 요약 연산
