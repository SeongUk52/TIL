# 부록A 추상화 기법

- 추상화는 도메인의 복잡성을 단순화하고 직관적인 멘탈 모델을 만드는 데 사용할 수 있는 가장 기본적인 인지 수단
- 추상화 기법의 종류 (각 추상화 기법은 복잡성을 낮추기 위해 사물의 특정한 측면을 감춘다.)
  - 분류와 인스턴스화: "분류"는 객체의 구체적인 세부 사항을 숨기고 인스턴스 간에 공유하는 공통적인 특성을 기반으로 범주를 형성하는
과정이다. 분류의 역은 범주로부터 객체를 생성하는 "인스턴스화" 과정이다.
  - 일반화와 특수화: "일반화"는 범주 사이의 차이를 숨기고 범주 간에 공유하는 공통적인 특성을 강조한다. 일반화의 역을 "특수화"라고 한다.
  - 집합과 분해: "집합"은 부분과 관련된 세부 사항을 숨기고 부분을 사용해서 전체를 형성하는 과정을 가리킨다. 집합의 반대 과정은 전체를
부분으로 분리하는 "분해" 과정이다.


- 객체지향의 가장 큰 장점은 동일한 추상화 기법을 프로그램의 분석, 설계, 구현 단계에 걸쳐 일관성 있게 적용할 수 있다는 점이다.


## 분류와 인스턴스화

### 개념과 범주
- 객체를 분류하고 "범주"로 묶는 것은 객체들의 특정 집합에 공통의 "개념"을 적용하는 것을 의미한다.
  - 개념이란 속성과 행위가 유사한 객체에 공통적으로 적용되는 관념이나 아이디어다.
  - 객체들을 공통적인 특성을 기반으로 범주로 묶고 개념을 적용하는 것은 범주라는 정신적인 렌즈를 통해 세상을 바라보는 것과 유사하다.


- 세상에 존재하는 객체에 개념을 적용하는 과정을 "분류"라고 한다.
  - 분류는 객체를 특정한 개념을 나타내는 집합의 구성 요소로 포함시킨다.
  - 사람들은 분류를 통해 개별 현상을 하나의 개념으로 다룬다.
    - 이때 '수많은 개별적인 현상들'을 "객체"라고 하고,
    - '하나의 개념'을 "타입"이라고 한다.
    - 즉, 분류는 객체를 타입과 연관시키는 것
- 분류의 역은 타입에 해당하는 객체를 생성하는 과정으로 "인스턴스화" 또는 "예시"라고 한다.


- 객체지향의 세계에서 개념을 가리키는 표준 용어는 "타입"이다.
  - 따라서 타입은 개념과 동의어이며 속성과 행위가 유사한 객체에 공통적으로 적용되는 관념이나 아이디어를 의미한다.
  - 이런 관점에서 분류란 객체들을 동일한 타입 또는 범주로 묶는 과정을 의미하므로 객체를 타입의 "인스턴스"라고 한다.


- 요약하면 분류는 객체와 타입 간의 관계를 나타낸 것
- 어떤 객체가 타입의 정의에 부합할 경우 그 객체는 해당 타입으로 분류되며 자동으로 타입의 인스턴스가 된다.

### 타입
- 객체를 타입에 따라 분류하기 위해서는 객체가 타입에 속하는지 여부를 확인할 수 있어야 한다.
- 타입을 객체의 분류 장치로서 적용할 수 있으려면 다음과 같은 세 가지 관점에서의 정의가 필요하다.
  - 심볼: 타입을 가리키는 간략한 이름이나 명칭
  - 내연: 타입의 완전한 정의, 내연의 의미를 이용해 객체가 타입에 속하는지 여부를 확인할 수 있다.
  - 외연: 타입에 속하는 모든 객체들의 집합


### 외연과 집합
- 타입의 외연은 타입에 속하는 객체들의 집합으로 표현한다.
  - 집합은 외연을 가리키는 또 다른 명칭
  - 객체들은 동시에 서로 다른 집합에 포함될 수도 있다.

- 단일 분류(single classification)와 다중 분류(multiple classification)의 차이점
  - 단일 분류: 한 객체가 한 시점에 하나의 타입에만 속하는 것
  - 다중 분류: 한 객체가 한 시점에 여러 타입에 속할 경우
  - 대부분의 객체지향 프로그래밍 언어들은 단일 분류만 지원한다.
    - 대부분의 언어에서 한 객체는 오직 한 클래스의 인스턴스여야만 하며 동시에 두 개의 클래스의 인스턴스일 수는 없다.
      - 이 관점에서 다중 분류를 다중 상속과 혼동해서는 안 된다.
      - 다중 상속은 하나의 타입이 다수의 슈퍼타입을 가질 수 있도록 허용하지만 타입 정의를 생략할 수는 없다.
      - 반면 다중 분류는 특정한 타입을 정의하지 않고도 하나의 객체가 서로 다른 타입의 인스턴스가 되도록 허용한다.


- 객체를 특정한 타입으로 분류하면 해당 객체는 타입의 집합에 포함된다.
  - 동적 분류(dynamic classification): 객체가 한 집합에서 다른 집합의 원소로 자신이 속하는 타입을 변경할 수 있는 경우
  - 정적 분류(static classification): 객체가 자신의 타입을 변경할 수 없는 경우


- 다중 분류와 동적 분류는 서로 베타적인 개념이 아니다.


- 다중 분류와 동적 분류는 개념적인 관점에서 도메인을 분석하는 데는 유용하지만 객체 지향 프로그래밍 언어의 제약으로 인해 이를
구현으로 옮기기는 쉽지 않다.
  - 다중 분류와 동적 분류 관점에서 도메인 모델의 초안을 만든 후 실제 구현에 적합하도록 단일 분류와 정적 분류 방식으로
객체들의 범주를 재조정하는 편이 분석과 구현 간의 차이를 메울 수 있는 가장 현실적인 방법이다.


- 마틴 파울러의 책에서 다중 분류와 동적 분류를 구현할 수 있는 다양한 방식의 '디자인 템플릿'을 소개하고 있다.
  - 이런 디자인 템플릿은 유연성이라는 측면에서 반드시 필요한 경우에만 사용해야 한다.
  - 단순함을 위해서는 항상 다중 분류와 동적 분류보다는 단일 분류와 정적 분류를 선택하는 것이 현명하다.


### 클래스
- 클래스는 타입을 구현하는 용도 외에도 코드를 재사용하는 용도로 사용되기도 한다.
- 클래스 외에도 인스턴스를 생성할 수 없는 추상 클래스나 인터페이스를 이용해 타입을 구현할 수도 있다.


- 클래스는 객체가 공유하는 본질적인 속성을 정의한다.
  - 대부분의 객체지향 프로그래밍 언어에서 동일한 범주에 속하는 객체는 동일한 클래스의 인스턴스여야 한다.
  - 대부분의 객체지향 언어는 본질적인 속성은 표현할 수 있지만 우연적인 속성은 표현할 수 없다.
    - 따라서 동일한 범주에 속하는 객체는 모두 동일한 속성을 가져야만 한다.

- 분류의 수준과 결과는 누가 분류를 하는가와 무엇을 기반으로 분류하는가에 따라 크게 달라진다.


## 일반화와 특수화

### 범주의 계층
- 린네의 계층 구조는 좀 더 게부적인 범주가 계층의 하위에 위치하고 좀 더 일반적인 범주가 계층의 상위에 위치한다.
  - 이때 계층의 상위에 위치한 범주를 계층의 하위에 위치한 범주의 일반화라고 하고
  - 계층의 하위에 위치한 범주는 계층의 상위에 위치한 범주의 특수화라고 한다.

### 서브타입
- 객체지향의 세계에서 범주는 개념을 의미하고
- 개념은 타입을 의미하므로 일반화와 특수화는 계층 구조 안에 존재하는 타입 간의 관계를 의미한다.
- 따라서 좀 더 일반적인 타입을 이용해 좀 더 세부적인 타입을 정의함으로써 타입 간의 계층 구조를 구축할 수 있다.
  - 어떤 타입이 다른 타입보다 일반적이라면 이 타입을 슈퍼타입(supertype)이라고 한다.
  - 어떤 타입이 다른 타입보다 좀 더 특수하다면 이 타입을 서브타입(subtype)이라고 한다.
  - 슈퍼타입은 서브타입의 일반화이고 서브타입은 슈퍼타입의 특수화다.



- 일반화의 특징을 이용하면 부분적인 사실을 통해 복잡한 사실에 대한 논리적인 추론이 가능해진다.
  - 즉, 파편화된 사실들을 모르더라도 복잡한 세상의 속성을 논리적으로 쉽게 이해할 수 있다.


- 객체의 집합을 나타내는 외연의 관점에서 서브타입은 슈퍼타입의 부분집합으로 표현된다.
- 크레이그 라만은 어떤 타입이 다른 타입의 서브타입이 되기 위해서는 '100% 규칙' 과 'Is-a 규칙'을 준수해야 한다고 말한다.
  - 100% 규칙은 타입의 내연과 관련된 규칙이며, Is-a 규칙은 타입의 외연과 관련된 규칙이다. 두 타입이 100%규칙과 Is-a 규칙을
만족시키지 못할 경우 두 타입 간에 일반화 관계는 성립하지 않는다.
  - 100% 규칙: 슈퍼타입의 정의가 100% 서브타입에 적용돼야만 한다. 서브타입은 속성과 연관관계 면에서 슈퍼타입과 100% 일치해야 한다.
  - Is-a 규칙: 서브타입의 모든 인스턴스는 슈퍼타입 집합에 포함돼야 한다. 이는 대개 영어로 서브타입은 슈퍼타입이다
    (subtype is a supertype)라는 구문을 만듦으로써 테스트할 수 있다.


- Is-a 규칙에서 알 수 있는 것처럼 흔히 일반화 관계를 is-a관계라고 한다.
  - is-a 관계의 본질은 서브타입이 슈퍼타입의 부분집합이라는 것이다.


