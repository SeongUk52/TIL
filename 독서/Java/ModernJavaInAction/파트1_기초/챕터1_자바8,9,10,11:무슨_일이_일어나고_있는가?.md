# 챕터 1 자바 8, 9, 10, 11 : 무슨 일이 일어나고 있는가?

이 장의 내용
 - 자바가 거듭 변화하는 이유
 - 컴퓨팅 환경의 변화
 - 자바에 부여되는 시대적 변화 요구
 - 자바 8과 자바 9의 새로운 핵심 기능 소개

## 1.1 역사의 흐름은 무엇인가?

자바 8에서 제공하는 새로운 기술
- 스트림 API
- 메서드에 코드를 전달하는 기법
- 인터페이스의 디폴트 메서드

스트림 API
- 스트림을 이용하면 synchronized를 사용하지 않아도 된다.
- 스트림 API 덕분에 다른 두 가지 기능
  - 메서드에 **코드를 전달하는 간결 기법**(메서드 참조와 람다)
  - 인터페이스의 **디폴트 메서드**가 존재할 수 있음

## 1.2 왜 아직도 자바는 변화하는가?
### 1.2.1 프로그래밍 언어 생태계에서 자바의 위치
자바 8에 추가된 새로운 프로그램 개념 3가지
### 1.2.2 스트림 처리
스트림: 한 번에 한 개씩 만들어지는 연속적인 데이터 항목들의 모임

이론적으로 프로그램은 입력 스트림에서 데이터를 한 개씩 읽어 들이며 마찬가지로 출력 스트림으로 데이터를 한 개씩 기록한다.
즉, 어떤 프로그램의 출력 스트림은 다른 프로그램의 입력 스트림이 될 수 있다.

자바 8에는 java.util.stream 패키지에 스트림 API가 추가되었다.

스트림 패키지에 정의된 Stream<T>는 T 형식으로 구성된 일련의 항목을 의미한다.

스트림은 파이프라인을 이용해서 스레드라는 복잡한 작업을 사용하지 않으면서도 **공짜**로 병렬성을 얻을 수 있다.


### 1.2.3 동작 파라미터화로 메서드에 코드 전달하기
코드 일부를 API로 전달하는 기능

동작 파라미터화(behavior parameterization) : 메서드를 다른 메서드의 인수로 넘겨주는 기능

### 1.2.4 병렬성과 공유 가변 데이터
병렬성을 공짜로 얻을 수 있는 법

### 1.2.5 자바가 진화해야 하는 이유
고전적인 객체지향에서 벗어나 함수형 프로그래밍으로 다가섰다는 것이 자바 8의 큰 변화다.

언어는 하드웨어나 프로그래머 기대의 변화에 부응하는 방향으로 변화해야 한다.

## 1.3 자바 함수
자바의 함수는 **수학적인 함수**처럼 사용되며 부작용을 일으키지 않는 함수를 의미

new 또는 팩토라 메서드 또는 라이브러리 함수를 이용해서 객체의 값을 얻을 수 있다. 객체 참조는 인스턴스(instance)를 가리킨다.
- "abc" (String 형식)
- new Integer(1111) (Integer 형식)
- new HashMap<Integer, String>(100) (HashMap의 생성자를 호출) 등으로 객체 참조를 얻을 수 있다.

심지어 배열도 객체다. 그런데 왜 함수가 필요할까?

프로그래밍 언어의 핵심 : 값을 바꾸는 것
- 전통적으로 이 값을 일급(first-class)값 이라고 부른다.

### 1.3.1 메서드와 람다를 일급 시민으로
메서드 참조(method reference): '::' -> 이 메서드를 값으로 사용하라는 의미

람다 : 익명 함수
- 람다(또는 익명 함수) 포함하여 함수도 값으로 취급할 수 있다.
- 람다 문법 형식으로 구현된 프로그램을 함수형 프로그래밍, 즉 '함수를 일급값으로 넘겨주는 프로그램을 구현한다'

### 1.3.2 코드 넘겨주기 : 예제
필터(filter): 특정 항목을 선택해서 반환하는 동작

### 1.3.3 메서드 전달에서 람다로

## 1.4 스트림
거의 모든 자바 애플리케이션은 컬렉션을 **만들고 활용**한다.

컬렉션에서는 반복 과정을 for-each 루프를 이용해서 각 요소를 반복하면서 작업을 수행했다.

외부 반복(external iteration) : 각 요소를 반복하면서 작업을 수행

스트림 API를 이용하면 루프를 신경 쓸 필요가 없다. 스트림 API에서는 라이브러리 내부에서 모든 데이터가 처리된다.

내부 반복(internal iteration) : 라이브러리 내부에서 모든 데이터가 처리 <- 스트림 API에서 일어남

### 1.4.1 멀티스레딩은 어렵다
- 컬렉션은 어떻게 데이터를 저장하고 접근할지에 중점을 두는 반면 스트림은 데이터에 어떤 계산을 할 것인지 묘사하는 것에 중점을 둔다.
- 스트림은 스트림 내의 요소를 쉽게 병렬로 처리할 수 있는 환경을 제공한다.

## 1.5 디폴트 메서드와 자바 모듈
- 디폴드 메서드를 이용하면 기존의 코드를 건드리지 않고도 원래의 인터페이스 설계를 자유롭게 확장할 수 있음
- 자바 8에서는 인터페이스 규격명세에 default라는 새로운 키워드를 지원한다.
- 자바 8부터는 List에 디폴트 메서드로 sort가 구현되어있음

## 1.6 함수형 프로그래밍에서 가져온 다른 유용한 아이디어
- 지금까지 살펴본 자바에 포함된 함수형 프로그래밍의 핵심적인 두 아이디어
  - 메서드와 람다를 일급값으로 사용하는 것
  - 가변 공유 상태가 없는 병렬 실행을 이용해서 효율적이고 안전하게 함수나 메서드를 호출할 수 있다는 것
    - 스트림 API는 두 가지 아이디어를 모두 활용한다.
- 자바 8에서는 NullPointer 예외를 피할 수 있도록 도와주는 Optional< T> 클래스를 제공한다.
  - Optional< T>는 값을 갖거나 갖지 않을 수 있는 컨테이너 객체다.
    - Optional< T>는 값이 없는 상황을 어떻게 처리할지 명시적으로 구현하는 메서드를 포함하고 있다.
- 패턴 매칭: switch를 확장한 것으로 데이터 형식 분류와 분석을 한 번 수행할 수 있다


- 자바8: 메소드 전달, 람다 등의 기능 추가
- 자바9: 대규모 컴포넌트 정의
  - 모듈 사용
  - 리액티브 프로그래밍 툴킷 임포트
- 자바10: 지역 변수 추론
- 자바11: 더 풍부해진 람다 표현식 인수 문법

## 1.7 마치며
- 함수는 일급값이다. 메서드를 어떻게 함수형값으로 넘겨주는지, 익명 함수(람다)를 어떻게 구현하는지 기억하자.
- 자바 8의 스트림 개념 중 일부는 컬렉션에서 가져온 것이다. 스트림과 컬렉션을 적절하게 활용하면 스트림의 인수를 병렬로
처리할 수 있으며 더 가독성이 좋은 코드를 구현할 수 있다.

## 챕터1 독후감
---
그동안 자바에 큰 변화가 있었다는 걸 알게 되었고 람다와 함수형 인터페이스, 스트림이라는 강력한 기능들을 제대로 활용하고 싶어졌다.