# 챕터 11 null 대신 Optional 클래스

> #### 이 장의 내용
> - null 참조의 문제점과 null을 멀리해야 하는 이유
> - null 대신 Optional : null로부터 안전한 도메인 모델 재구현하기
> - Optional 활용 : null 확인 코드 제거하기
> - Optional에 지정된 값을 확인하는 방법
> - 값이 없을 수도 있는 상황을 고려하는 프로그래밍


## 11.1 값이 없는 상황을 어떻게 처리할까?

```java
public String getCarInsuranceName(Person person) {
    return person.getCar().getInsurance().getName();
}
```
- 차를 소유하지 않은 사람도 많다.
  - 이때 getCar를 호출하면?
  - 대부분의 프로그래머는 null 참조를 반환하는 방식으로 자동차를 소유하고 있지 않음을 표현
  - 그러면 getInsurance는 null 참조의 보험 정보를 반환하려 할 것이므로 런타임에 NullPointerExceoption이 발생하면서
프로그램 실행이 중단된다.


### 11.1.1 보수적인 자세로 NullPointerException 줄이기
- null인지 판별하는 코드를 구간마다 적용하는 것은 코드의 구조를 엉망으로 만듦

### 11.1.2 null 때문에 발생하는 문제
- 에러의 근원이다: NullPointerException은 자바에서 가장 흔히 발생하는 에러다.
- 코드를 어지럽힌다: 때로는 중첩된 null 확인 코드를 추가해야 하므로 null 때문에 코드 가독성이 떨어진다.
- 아무 의미가 없다: null은 아무 의미도 표현하지 않는다. 특히 정적 형석 언어에서 값이 없음을 표현하는 방법으로는 적절하지 않다.
- 자바 철학에 위배된다: 자바는 개발자로부터 모든 포인터를 숨겼다. 하지만 예외가 있는데 그것이 바로 null 포인터다.
- 형식 시스템에 구멍을 만드나: null으 무형식이며 정보를 포함하고 있지 않으므로 모든 참조 형식에 null을 할당할 수 있다. 이런 식으로
null이 할당되기 시작하면서 시스템의 다른 부분으로 null이 퍼졌을 때 애초에 null이 어떤 의미로 사용되었는지 알 수 없다.

  
### 11.1.3 다른 언어는 null 대신 무얼 사용하나?
- 그루비: 안전 내비게이션 연산자 (?.)
- 함수형 언어
  - 하스켈: 선택형 값을 저장할 수 있는 Maybe라는 형식을 제공한다.
  - 스칼라: T형식의 값을 갖거나 아무 값도 갖지 않을 수 있는 Option[T]라는 구조를 제공한다.
- 자바8: '선택형 값' 개념의 영향을 받아서 java.util.Optional< T>라는 새로운 클래스를 제공한다.


## 11.2 Optional 클래스 소개
- Optional은 선택형값을 캡슐화하는 클래스다.
- 값이 있으면 Optional 클래스는 값을 감싼다.
- 반면 값이 없으면 Optional.empty 메서드로 Optional을 반환한다.
  - Optional.empty는 Optional의 특별한 싱글턴 인스턴스를 반환하는 정적 팩토리 메서드다.
- Optional 클래스를 사용하면서 모델의 의미(sematic)가 더 명확해졌다.
  - 값이 없을 수도 있음을 명시적으로 보여줌


- 모든 null 참조를 Optional로 대치하는 것은 바람직하지 않다. Optional의 역할은 더 이해하기 쉬운 API를 설계하도록 돕는 것이다.
즉, 메서드의 시그니처만 보고도 선택형값인지 여부를 구별할 수 있다. Optional이 등장하면 이를 언랩해서 값이 없을 수 있는 상황에 적절하게
대응하도록 강제하는 효과가 있다.


## 11.3 Optional 적용 패턴
