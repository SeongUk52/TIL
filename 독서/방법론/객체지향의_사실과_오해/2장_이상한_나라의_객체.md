# 이상한 나라의 객체

아기들 역시 뚜렷한 경계를 가신 객체들의 집합으로 세상을 바라본다.

## 객체지향과 인지 능력

## 객체, 그리고 이상한 나라

### 이상한 나라의 앨리스

### 앨리스 객체
- 앨리스는 정원으로 통하는 문을 통과하기에 적당한 **상태**로 자신의 키를 계속해서 변화시켰다.
- 결국 앨리스의 키를 변화시키는 것은 앨리스의 **행동**
- 앨리스가 하는 행동에 따라 앨리스의 상태가 변하게 된다.
  - 앨리스가 한 행동의 결과는 앨리스의 상태에 의존적이다.
- 행동 간의 순서가 중요
- 앨리스는 상태 변경과 무관하게 유일한 존재로 식별 가능하다.

> - 엘리스는 상태를 가지며 상태는 변경 가능하다.
> - 앨리스의 상태를 변경시키는 것은 앨리스의 행동이다.
>   - 행동의 결과는 상태에 의존적이며 상태를 이용해 서술할 수 있다.
>   - 행동의 순서가 결과에 영향을 미친다.
> - 앨리스는 어떤 상태에 있더라도 유일하게 식별 가능하다.

## 객체, 그리고 소프트웨어 나라

객체의 다양한 특성을 설명하기 위해서는 객체를 상태(state), 행동(behavior), 식별자(identity)를 지닌 실체로 보는 것이 가장 효과적이다.

### 상태

#### 왜 상태가 필요한가
- 상태를 이용하면 과거의 모든 행동 이력을 설명하지 않고도 행동의 결과를 쉽게 예측하고 설명할 수 있다.
- 상태를 이용하면 과거에 얽매이지 않고 현재를 기반으로 객체의 행동 방식을 이해할 수 있다.
- 상태는 근본적으로 세상의 복잡성을 완화하고 인지 과부하를 줄일 수 있는 중요한 개념이다.

#### 상태와 프로퍼티
- 모든 객체의 상태는 단순한 값과 객체의 조합으로 표현할 수 있다. 이때 객체의 상태를 구성하는 모든 특징을 통틀어 객체의 프로퍼티
(property)라고 한다. 
- 프로퍼티는 변경되지 않고 고정되기 때문에 '정적'이다.
- 반면 프로퍼티 값(propert value)은 시간이 흐름에 따라 변경되기 때문에 '동적'이다.
- 링크(link) : 객체와 객체 사이의 의미 있는 연결
  - 객체 사이에는 링크가 존재해야만 요청을 보내고 받을 수 있다. 즉, 객체의 링크를 통해서만 메시지를 주고받을 수 있다.
  - 링크는 객체가 다른 객체를 참조할 수 있다는 것을 의미
  - 일반적으로 한 객체가 다른 객체의 식별자를 알고 있는 것으로 표현
- 객체를 구성하는 단순한 값은 속성(attribute)
> **상태**는 특정 시점에 객체가 가지고 있는 정보의 집합으로 객체의 구조적 특징을 표현한다. 객체의 상태는 객체에 존재하는 정적인
> 프로퍼티와 동적인 프로퍼티 값으로 구성된다. 객체의 프로퍼티는 단순한 값과 다른 객체를 참조하는 링크로 구분할 수 있다.

### 행동

#### 상태와 행동
- 객체가 취하는 행동은 객체 자신의 상태를 변경시킨다. 객체의 행동에 의해 객체의 상태가 변경된다는 것을 행동이 **부수 효과(side effect)
를 초래한다는 것을 의미한다.
- 상태와 행동 사이에는 다음과 같은 관계가 있다.
  - 객체의 행동은 상태에 영향을 받는다.
  - 객체의 행동은 상태를 변경시킨다.
- 상태라는 개념을 이용해 행동을 다음의 두 가지 관점에서 서술할 수 있음을 의미
  - 상호작용이 현재의 상태에 어떤 방식으로 의존하는가
  - 상호작용이 어떻게 현재의 상태를 변경시키는가
- 앨리스의 이야기
  - 앨리스의 키가 40센티미터 이하라면 문을 통과할 수 있다.
  - 문을 통과한 후에 앨리스의 위치는 아름다운 정원으로 바뀌어야 한다.

#### 협력과 행동
객체의 행동으로 인해 발생하는 결과
- 객체 자신의 상태 변경
- 행동 내에서 협력하는 다른 객체에 대한 메시지 전송

> **행동**이란 외부의 요청 또는 수신된 메시지에 응답하기 위해 동작하는 활동이다. 행동의 결과로 객체는 자신의 상태를 변경하거나 다른
> 객체에게 메시지를 전달할 수 있다. 객체는 행동을 통해 다른 객체와의 협력에 참여하므로 행동은 외부에 가시적이어야 한다.

#### 상태 캡슐화
- 객체는 상태를 캡슐 안에 감춰둔 채 외부로 노출하지 않는다. 객체가 외부에 노출하는 것은 행동뿐이며, 외부에서 객채에
접근할 수 있는 유일한 방법 역시 행동뿐이다.
- 상태를 잘 정의된 행동 집합 뒤로 캡슐화하는 것은 객체의 자율성을 높이고 협력을 단순하고 유연하게 만든다. 이것이 상태를 캡슐화해야
하는 이유다.

### 식별자
- 객체가 식별 가능하다는 것은 객체를 서로 구별할 수 있는 특정한 프로퍼티가 객체 안에 존재한다는 것을 의미한다.
이 프로퍼티를 식별자라고 한다. 모든 객체는 식별자를 가지며 식별자를 이용해 객체를 구별할 수 있다.
- 값(value)은 숫자, 문자열, 날짜, 시간, 금액 등과 같이 변하지 않는 양을 모델링한다. 흔히 값의 상태는 변하지
않기 때문에 불변 상태(immutable state)를 가진다고 말한다.
- 값이 같은지 여부는 상태가 같은지를 이용해 판단한다. 값의 상태가 같으면 두 인스턴스는 동일한 것으로 판단하고 상태가 다르면
두 인스턴스는 다른 것으로 판단한다. 이처럼 상태를 이용해 두 값이 같은지 판단할 수 있는 성질을 동등성(equality)이라고 한다.
- 식별자를 기반으로 객체가 같은지를 판단할 수 있는 성질을 동일성(identical)이라고 한다.

>**식별자**란 어떤 객체를 다른 객체와 구분하는 데 사용하는 객체의 프로퍼티다. 값은 식별자를 가지지 않기 때문에 상태를 이용한
> 동등성 검사를 통해 두 인스턴스를 비교해야 한다. 객체는 상태가 변경될 수 있기 때문에 식별자를 이용한 동일성 검사를 통해 두 인스턴스를
> 비교할 수 있다.

- **참조 객체(reference object)**, 또는 **엔티티(entity)** 는 식별자를 지닌 전통적인 의미의 객체를 가르키는 용어
- **값 객체(value object)**는 식별자를 가지지 않는 값을 가리키는 용어

> - 객체는 상태를 가지며 상태는 변경 가능하다.
> - 객체의 상태를 변경시키는 것은 객체의 행동이다.
>   - 행동의 결과는 상태에 의존적이며 상태를 이용해 서술할 수 있다.
>   - 행동의 순서가 실행 결과에 영향을 미친다.
> - 객체는 어떤 상태에 있더라도 유일하게 식별 가능하다.

## 기계로서의 객체
- 쿼리(query): 객체의 상태를 조회하는 작업
- 명령(command): 객체의 상태를 변경하는 작업
- 객체에 접근할 수 있는 유일한 방법은 객체가 제공하는 행동뿐
- 객체에서는 상태와 행동이 하나의 단위로 캡슐화된다는 객체의 정의를 매우 효과적으로 표현

## 행동이 상태를 결정한다
- 상태를 먼저 결정하고 행동을 나중에 결정하는 방법은 설계에 나쁜 영향을 끼친다.
  - 상태를 먼저 결정할 경우 캡슐화가 저해된다.
    - 상태에 초점을 맞출 경우 상태가 객체 내부로 깔끔하게 캡슐화되지 못하고 공용 인터페이스에 그대로 노출되버릴 확률이 높아진다.
  - 객체를 협력자가 아닌 고립된 섬으로 만든다.
  - 객체의 재사용성이 저하된다.
- 객체는 다른 객체와 협력하기 위해 존재, 객체의 행동은 객체가 협력에 참여하는 유일한 방법
- 결과적으로 우리가 애플리케이션 안에서 어떤 행동을 원하느냐가 어떤 객체가 적합한지를 결정한다.
- 협력 안에서 객체의 해동은 결국 객체가 협력에 참여하면서 완수해야 하는 책임을 의미

따라서 어떤 책임이 필요한가를 결정하는 과정이 전체 설계를 주도해야 한다.
- 첵임=주도 설계(Responsibility-Driven Design, RDD)
  - 협력이라는 문맥 안에서 객체의 행동을 생각하도록 도움으로써 응집도를 높고 재사용 가능한 객체를 만들 수 있게 한다.

> 행동이 상태를 결정한다.

## 은유와 객체

### 두 번째 도시전설
객체지향이 현실을 오롯이 모방하기만 한다는 것은 오해일 뿐이다.

### 의인화
현실 속의 객체와 소프트웨어 객체 사이의 가장 큰 차이점
- 현실 속에서는 수동적인 존재가 소프트웨어 객체로 구현될 때는 능동적으로 변한다는 것

의인화(anthropomorphism): 현실의 객체보다 더 많은 일을 할 수 있는 소프트웨어 객체의 특징

> 객체들은 그들 자신의 체계 안에서 [능동적이고 자율적인]에이전트다.

### 은유
현실 세계와 객체지향 세계 사이의 관계를 좀 더 정확하게 설명할 수 있는 단어는 은유(metaphor)
- 은유란 실제로는 적용되지 않는 한 가지 개념을 이용해 다른 개념을 서술하는 대화의 한 형태
- 은유의 본질은 한 종류의 사물을 다른 종류의 사물 관점에서 이해하고 경험하는 데 있다.

### 이상한 나라를 창조하라
- 객체지향 설계자로서 우리의 목적은 현실을 모방하는 것이 아님
- 현실을 닮아야 한다는 어떤 제약이나 구속도 없다.

## 2장 독후감

---
객체의 행동과 상태에 대해 알게되었고, 객체지향의 세계에서는 객체들이 행동을 통해 서로 협력한다는 것도 알게되었다.
